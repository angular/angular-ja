# フィーチャーモジュールの種類

フィーチャーモジュールは、
大きく分けて次のような5つのカテゴリーに分類される傾向があります:

* ドメインフィーチャーモジュール(Domain feature module)
* ルーテッドフィーチャーモジュール(Routed feature module)
* ルーティングモジュール(Routing module)
* サービスフィーチャーモジュール(Service feature module)
* ウィジェットフィーチャーモジュール(Widget feature module)

次のガイドラインでは、個々の種類の使用方法とその典型的な特性について説明します。
ただし、実際のアプリケーションでは混合して使われるかもしれません。

<table>

 <tr>
   <th style="vertical-align: top; min-width: 90px">
     種類
   </th>

   <th style="vertical-align: top">
     ガイドライン
   </th>
 </tr>

 <tr>
   <td>ドメイン</td>
   <td>
     ドメインフィーチャーモジュールは、顧客の編集や発注など、特定のアプリケーションドメインに特化したユーザー体験を提供します。

     通常、機能のルートとして振る舞うトップのコンポーネントと、プライベートでサポートする下位のサブコンポーネントで構成されます。

     ドメインフィーチャーモジュールは主に宣言で構成され、トップのコンポーネントだけがエクスポートされます。

     ドメインフィーチャーモジュールがプロバイダーを持つことはめったにありません。持つ場合、提供されるサービスの寿命はモジュールの寿命と同じでなければなりません。

     ドメインフィーチャーモジュールは、通常、より大きなフィーチャモジュールによって一度だけインポートされます。

     ルーティングがない小さなアプリケーションのルートモジュールである`AppModule`によってインポートされるかもしれません。
   </td>
 </tr>
 <tr>
   <td>ルーテッド</td>
   <td>
     ルーテッドフィーチャーモジュールは、トップのコンポーネントがルーターナビゲーションルートのターゲットであるドメインフィーチャーモジュールです。

     すべての遅延ロードされるモジュールはルーテッドフィーチャーモジュールとして定義されます。

     ルーテッドフィーチャーモジュールは、モジュール内のコンポーネントが外部コンポーネントのテンプレートに表示されることがないため、何もエクスポートしません。

     遅延ロードされるルーテッドフィーチャーモジュールは、どのモジュールによってもインポートされるべきではありません。そうすることで、遅延ロードの目的を無駄にして事前ロードに含まれてしまいます。つまり、`AppModule`のインポートの中に存在してはいけないということを意味します。事前ロードされるルーテッドフィーチャーモジュールは、コンパイラがそのコンポーネントの情報について知るために、別のモジュールによってインポートされなければなりません。

     ルーテッドフィーチャーモジュールは、[フィーチャーモジュールの遅延ロード](/guide/lazy-loading-ngmodules)で説明されているようにプロバイダーを持つことはめったにありません。持つ場合、提供されるサービスの寿命は、モジュールの寿命と同じでなければなりません。ルーテッドフィーチャーモジュールまたはルーテッドモジュールがインポートするモジュールではアプリケーション全体でシングルトンになるサービスを提供しないでください。
   </td>
 </tr>

 <tr>
   <td>ルーティング</td>
   <td>

     ルーティングモジュールは、別のモジュールのルーティング構成を提供し、ルーティングの興味を対応するモジュールから分離します。

     ルーティングモジュールは、通常、次のことを行います:

     <ul>
     <li>ルーティングを定義します。</li>
     <li>ルーターの設定をモジュールのインポートに追加します。</li>
     <li>ガード、リゾルバサービスプロバイダーをモジュールのプロバイダーに追加します。</li>
     <li>ルーティングモジュールの名前は、"Routing"サフィックスを使用して、対応するモジュールと平行する名前をつける必要があります。 たとえば、<code>foo.module.ts</code>の<code>FooModule</code>だった場合は、<code>foo-routing.module.ts</code>の<code>FooRoutingModule</code>となります。対応するモジュールがルートモジュールである<code>AppModule</code>の場合、<code>AppRoutingModule</code>は<code>RouterModule.forRoot(routes)</code>を使用してそのインポートにルーター設定を追加します。他のすべてのルーティングモジュールは、<code>RouterModule.forChild(routes)</code>をインポートする子ルーターとなります。</li>
     <li>ルーティングモジュールは、対応するモジュールのコンポーネントが<code>RouterLink</code>や<code>RouterOutlet</code>などのルーターディレクティブにアクセスできるように<code>RouterModule</code>を再エクスポートします。</li>
     <li>ルーティングモジュールには自分自身の宣言がありません。コンポーネント、ディレクティブ、およびパイプは、ルーティングモジュールではなく、フィーチャーモジュールの責務です。</li>
     </ul>

     ルーティングモジュールは、その対応するモジュールによってのみインポートすべきです。

   </td>
 </tr>

 <tr>
   <td>サービス</td>
   <td>

     サービスモジュールは、データアクセスやメッセージングなどのユーティリティー的なサービスを提供します。完全にプロバイダーで構成され、宣言は存在しないのが理想的です。 Angularの`HttpClientModule`はサービスモジュールの良い例です。

     ルートモジュールである`AppModule`は、サービスモジュールをインポートすべき唯一のモジュールです。

   </td>
 </tr>

 <tr>
   <td>ウィジェット</td>
   <td>

     ウィジェットモジュールは、コンポーネント、ディレクティブ、およびパイプを外部モジュールで使用できるようにします。多くのサードパーティのUIコンポーネントライブラリは、ウィジェットモジュールです。

     ウィジェットモジュールは完全に宣言で構成され、そのほとんどはエクスポートされるべきです。

     ウィジェットモジュールがプロバイダーを持つことはめったにありません。

     ウィジェットを必要とするコンポーネントテンプレートの属するモジュールには、ウィジェットモジュールをインポートしてください。

   </td>
 </tr>

</table>

次の表は、個々のフィーチャーモジュールの主な特性をまとめたものです。

<table>
 <tr>
   <th style="vertical-align: top">
     フィーチャーモジュールの種類
   </th>

   <th style="vertical-align: top">
     宣言
   </th>

   <th style="vertical-align: top">
     プロバイダー
   </th>

   <th style="vertical-align: top">
     エクスポート
   </th>

   <th style="vertical-align: top">
     インポート先
   </th>
 </tr>

 <tr>
   <td>ドメイン</td>
   <td>あり</td>
   <td>まれ</td>
   <td>トップのコンポーネント</td>
   <td>フィーチャーモジュール、 AppModule</td>
 </tr>

 <tr>
   <td>ルーテッド</td>
   <td>あり</td>
   <td>まれ</td>
   <td>なし</td>
   <td>なし</td>
 </tr>

 <tr>
   <td>ルーティング</td>
   <td>なし</td>
   <td>あり (ガード)</td>
   <td>RouterModule</td>
   <td>(ルーティングのための)フィーチャーモジュール</td>
 </tr>

 <tr>
   <td>サービス</td>
   <td>なし</td>
   <td>あり</td>
   <td>なし</td>
   <td>AppModule</td>
 </tr>

 <tr>
   <td>ウィジェット</td>
   <td>あり</td>
   <td>まれ</td>
   <td>あり</td>
   <td>フィーチャーモジュール</td>
 </tr>
</table>

<hr />

## NgModuleについてのさらに詳しい情報

NgModuleについてのさらに詳しい情報については次の記事を参照してください:
* [Angularルーターによるモジュールの遅延ロード](guide/lazy-loading-ngmodules)
* [プロバイダー](guide/providers)
